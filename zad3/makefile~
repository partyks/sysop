VPATH=src/include:src/operacje:src/we_wy:src/reszta

CC = gcc $(FLAG) $(INC) $(COMS)
INC = -I src/include
FLAG = -Wall
PROJECT = macierze
COMS =
	ifeq ($(LOGS),yes)
		COMS = -D KOMUNIKATY
	endif

ZR_KONS = wczytaj_konsola.c wypisz_konsola.c
ZR_PLIK = wczytaj_plik.c wypisz_plik.c pliki.c
ZR_RESZTA = suma.c roznica.c iloczyn.c macierz.c

O_KONS=$(ZR_KONS:.c=.o)
O_PLIK=$(ZR_PLIK:.c=.o)
O_RESZTA=$(ZR_RESZTA:.c=.o)

HEAD = src/include/suma.h src/include/roznica.h src/include/iloczyn.h src/include/wypisz.h src/include/wczytaj.h src/include/macierz.h

konsola : $(O_KONS) $(O_RESZTA) main_k.o 
	$(CC) $^ -o $(PROJECT)

plik : $(O_PLIK) $(O_RESZTA) main_p.o
	$(CC) $^ -o $(PROJECT)

iloczyn.o : src/operacje/iloczyn.c src/include/iloczyn.h src/include/macierz.h
	$(CC) -c $< -o $@ 

suma.o : src/operacje/suma.c src/include/suma.h src/include/macierz.h
	$(CC) -c $< -o $@

roznica.o : src/operacje/roznica.c src/include/roznica.h src/include/macierz.h
	$(CC) -c $< -o $@

pliki.o : src/we_wy/pliki.c src/include/pliki.h
	$(CC) -c $< -o $@

wczytaj_konsola.o : src/we_wy/wczytaj_konsola.c src/include/wczytaj.h src/include/macierz.h
	$(CC) -c $< -o $@

wczytaj_plik.o : src/we_wy/wczytaj_plik.c src/include/wczytaj.h src/include/macierz.h src/include/pliki.h
	$(CC) -c $< -o $@

wypisz_konsola.o : src/we_wy/wypisz_konsola.c src/include/wczytaj.h src/include/macierz.h
	$(CC) -c $< -o $@

wypisz_plik.o : src/we_wy/wypisz_plik.c src/include/wczytaj.h src/include/macierz.h src/include/pliki.h
	$(CC) -c $< -o $@

main_k.o : src/main.c $(HEAD)
	$(CC) -c $< -o $@ 

main_p.o : src/main.c $(HEAD) src/include/pliki.h
	$(CC) -D WEWY_PLIKI -c $< -o $@

macierz.o : src/reszta/macierz.c src/include/macierz.h
	$(CC) -c $< -o $@ 

clean :
	rm -f *.o
	rm @(PROJECT)

.PHONY : clean
